##############################################################################
# sssd configuration file
##############################################################################
# NOTE: This file is automatically generated by puppet
# Changes to this file will be overwritten periodically by puppet!
##############################################################################


[sssd]
config_file_version = 2

# Number of times services should attempt to reconnect in the
# event of a crash or restart before they give up
reconnection_retries = 3

# If a back end is particularly slow you can raise this timeout here
sbus_timeout = 30
services = nss, pam

# SSSD will not start if you do not configure any domains.
# Add new domain configurations as [domain/<NAME>] sections, and
# then add the list of domains (in the order you want them to be
# queried) to the "domains" attribute below and uncomment it.
#domains = LOCAL,LDAP
domains = france2,nyse

[nss]
# The following prevents SSSD from searching for the root user/group in
# all domains (you can add here a comma-separated list of system accounts that
# are always going to be /etc/passwd users, or that you want to filter out).
filter_groups = root
filter_users = root
reconnection_retries = 3

# The entry_cache_timeout indicates the number of seconds to retain an
# entry in cache before it is considered stale and must block to refresh.
# The entry_cache_nowait_timeout indicates the number of seconds to
# wait before updating the cache out-of-band. (NSS requests will still
# be returned from cache until the full entry_cache_timeout). Setting this
# value to 0 turns this feature off (default).
; entry_cache_timeout = 600
; entry_cache_nowait_timeout = 300

[pam]
reconnection_retries = 3

# Example domain configurations
# Note that enabling enumeration in the following configurations will have a
# moderate performance impact while enumerations are actually running, and
# may increase the time necessary to detect network disconnection.
# Consequently, the default value for enumeration is FALSE.
# Refer to the sssd.conf man page for full details.

# Example LOCAL domain that stores all users natively in the SSSD internal
# directory. These local users and groups are not visible in /etc/passwd; it
# now contains only root and system accounts.
; [domain/LOCAL]
; description = LOCAL Users domain
; id_provider = local
; enumerate = true
; min_id = 500
; max_id = 999

[domain/france2]
description = AD nyse
access_provider = ldap
id_provider = ldap
auth_provider = ldap
chpass_provider = ldap
cache_credentials = True
enumerate = True
ldap_uri = ldap://ldap
ldap_search_base = dc=ifrance2,dc=int
ldap_default_bind_dn = cn=admin,dc=ifrance2,dc=int
ldap_tls_reqcert = never


[domain/nyse]
description = AD nyse
access_provider = ldap
id_provider = ldap
auth_provider = ldap
chpass_provider = ldap
cache_credentials = True
ldap_id_use_start_tls = True
ldap_schema = rfc2307bis
ldap_uri = ldap://ldap.local
debug_level = 9
enumerate = True
ldap_search_base = dc=ldap.local
#ldap_search_base = OU=Unix,OU=NYSE-USERS,DC=ldap.local
#ldap_user_search_base = OU=Users,OU=Unix,OU=NYSE-USERS,DC=ldap.local
#ldap_group_search_base = OU=Groups,OU=Unix,OU=NYSE-USERS,dc=ldap.local
ldap_default_bind_dn = cn=ldap,cn=Users,dc=ldap.local
ldap_default_authtok_type = password
ldap_default_authtok = d50_*spg
ldap_tls_cacert =  /etc/ldapca.pem
ldap_tls_reqcert = demand
ldap_user_object_class = user
ldap_group_object_class = group
ldap_user_gecos = cn 
ldap_user_home_directory = unixHomeDirectory
ldap_user_object_class = person
ldap_force_upper_case_realm = True
